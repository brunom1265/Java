package com.im.out;

import static org.lwjgl.glfw.GLFW.*;
import static org.lwjgl.opengl.GL11.*;

import org.lwjgl.glfw.GLFWVidMode;
import org.lwjgl.opengl.GL;

import com.im.out.graphics.Model;

public class Main {

	private static int width = 600;
	private static int height = 480;

	private static long window;
	private static Model model;

	public static void init() {

		if (!glfwInit()) {
			throw new IllegalStateException("Fale to initialise GLFW!");
		}

		glfwWindowHint(GLFW_VISIBLE, GLFW_FALSE);

		window = glfwCreateWindow(width, height, "I'm Out", 0, 0);
		if (window == 0) {
			throw new IllegalStateException("Failed to create window");
		}

		GLFWVidMode videoMode = glfwGetVideoMode(glfwGetPrimaryMonitor());

		glfwSetWindowPos(window, (videoMode.width() - width) / 2, (videoMode.height() - height) / 2);

		glfwShowWindow(window);

		glfwMakeContextCurrent(window);

		GL.createCapabilities();
		
		glEnable(GL_TEXTURE_2D);
		
		//Texture tex = new Texture("../I'm Out/src/com/im/out/res/images/barack.jpg");
		

		
	}
	
	public static void run(){
		
		float[] vertices = new float[]{
				-0.5f,  0.5f, 0,
				 0.5f,  0.5f, 0,
				 0.5f, -0.5f, 0,
				
				-0.5f, -0.5f, 0,
				 0.5f, -0.5f, 0,
				-0.5f,  0.5f, 0
		};
		
		float[] texture = new float[]{
				0, 0,
				1, 0,
				1, 1,
				
				1, 1,
				0, 1,
				0, 0
		};
		
		model = new Model(vertices);
		
		while(!glfwWindowShouldClose(window)){

			glfwPollEvents();
					
			update();

			render();
		}
		stop();

	}

	public static void update() {
		if(glfwGetKey(window, GLFW_KEY_ESCAPE) == GL_TRUE){
			glfwSetWindowShouldClose(window, true);
		}
	}

	private static void render() {
		
		glClear(GL_COLOR_BUFFER_BIT);
		
		model.render();
		
//		tex.bind();
//		glBegin(GL_QUADS);
//			glTexCoord2f(0, 0);
//			glVertex2f(-0.5f, 0.5f);
//			
//			glTexCoord2f(1, 0);
//			glVertex2f(0.5f, 0.5f);
//			
//			glTexCoord2f(1, 1);
//			glVertex2f(0.5f, -0.5f);
//			
//			glTexCoord2f(0, 1);
//			glVertex2f(-0.5f, -0.5f);
//		
//		glEnd();
		
		glfwSwapBuffers(window);

	}

	public static void stop() {

	}

	public static void main(String[] args) {
		init();
		run();
	}

}
