package bvsm.panel;

import java.awt.event.ActionEvent;
import java.sql.SQLException;

import javax.swing.JFrame;

public class DefinicoesPanel extends BasePanel{

	public DefinicoesPanel(BasePanel previous, JFrame frame, String name, int x, int y, int width, int height) {
		super(previous, frame, name, x, y, width, height);
	}
	
	protected void createComponents(){
		createLabel("Utilizador: ", "utilizador", 100, 100);
		createLabel("Password: ", "password", 100, 150);
		createJTextArea("utilizadorLogin", "", 200, 100, 110, 30);
		createJTextArea("passwordLogin", "", 200, 150, 110, 30);
		createButton("Entrar", "entrarLogin", 200, 200);
		createButton("Voltar", "voltarDefinicoes", 100, 600);
	}
	
	public void actionPerformed(ActionEvent e) {
		if(e.getActionCommand() == "Entrar"){
			String username = getTextArea("utilizadorLogin").getText();
			String password = getTextArea("passwordLogin").getText();
			
			try {
				if(db.getUser(username, password)){
					getButton("entrarLogin").setVisible(false);
					getTextArea("utilizadorLogin").setVisible(false);
					getTextArea("passwordLogin").setVisible(false);
					getLabel("utilizador").setVisible(false);
					getLabel("password").setVisible(false);
				}
			} catch (SQLException e1) {
				e1.printStackTrace();
			}
		}
		
		if(e.getActionCommand() == "voltarDefinicoes"){
			setVisible(false);
			bp.setVisible(true);
		}
	}
}
